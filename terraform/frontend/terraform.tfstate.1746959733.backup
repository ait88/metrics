{
  "version": 4,
  "terraform_version": "1.11.4",
  "serial": 101,
  "lineage": "6acdd61a-a081-e4b1-9978-9069d96b74e2",
  "outputs": {
    "frontend_ip": {
      "value": "149.28.169.127",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "vultr_ssh_key",
      "name": "metrics",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "date_created": "2025-05-10T11:31:58+00:00",
            "filter": [
              {
                "name": "name",
                "values": [
                  "metrics@alexandrinait.com.au"
                ]
              }
            ],
            "id": "c6a4ff57-51bf-47aa-84df-9b25c2e23f5f",
            "name": "metrics@alexandrinait.com.au",
            "ssh_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDYQLokRZ0VXnfUQ9Lqzj3rdufk/s2mAVs9PniPDLVJxv9q7FtpbQVDoY80W2rbhH84vbmGRGlyIQqwILuxHgQPRtewRyuihi+ZqBBJW7Om3Eusmk+xb7zL7ndkb2i47L1Z0hHwNFjygN1Pwh7xmKXVhsb4o5o4AzJfC2WmaWiiwSfGjaEXW997wYR48SN81/sEurBBZ4NORw84WfI5jTSb7yjdnaf+bWk3FKujXUgvT1ZyNd83UJD2e+ig4u/3t8FEmdaD/wQnELmWjdkOdJFcOEh6aI7M4kHRWI74TyJ6W3enZdqIw3OZ2r+a56KHAtsoHYyncR5GitRBVgeIF1+oRis9VuuJVbiAih8T+H+XCpLe0Ng3HemfjHnGXSAGDdsV3o2yVBaUkz7q950bPin26T5tN60SkeIEqfIgvKJXpEnUKcI9bd1sKsV3ZBqS6j6zVxCS6/WV5S4BSqhmH3nnhZqMmBucx4XtuPiKngHxwklqWvfCLDcyJ9Z0aNz7d71v7Kt9i2q4/vGLcDuRnEg8mbE6hqSKu0Tl3OoxiBga1kRxs9IQvsYi94vKoZqgcPWi9q9LNzq1EwBG8Opb85o/G6l8G9SRsvTrxKBS+8228fk7iLYCmxxzphEyi+q+CxQv5v+YawN5aGMuaj2ZrYoHge0Wx9wjH1L8Y85GQMQmKw== metrics@alexandrinait.com.au"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vultr_firewall_group",
      "name": "frontend",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "date_created": "2025-05-11T09:59:02+00:00",
            "date_modified": "2025-05-11T09:59:02+00:00",
            "description": "Metrics Frontend Firewall",
            "id": "6f2ddda6-17bc-4472-ad30-54ea63c853ce",
            "instance_count": 0,
            "max_rule_count": 50,
            "rule_count": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vultr_firewall_rule",
      "name": "http",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "firewall_group_id": "6f2ddda6-17bc-4472-ad30-54ea63c853ce",
            "id": "4",
            "ip_type": "v4",
            "notes": "Allow HTTP",
            "port": "80",
            "protocol": "tcp",
            "source": "",
            "subnet": "0.0.0.0",
            "subnet_size": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "vultr_firewall_group.frontend"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vultr_firewall_rule",
      "name": "https",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "firewall_group_id": "6f2ddda6-17bc-4472-ad30-54ea63c853ce",
            "id": "1",
            "ip_type": "v4",
            "notes": "Allow HTTPS",
            "port": "443",
            "protocol": "tcp",
            "source": "",
            "subnet": "0.0.0.0",
            "subnet_size": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "vultr_firewall_group.frontend"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vultr_firewall_rule",
      "name": "ssh",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "firewall_group_id": "6f2ddda6-17bc-4472-ad30-54ea63c853ce",
            "id": "3",
            "ip_type": "v4",
            "notes": "Allow SSH",
            "port": "22",
            "protocol": "tcp",
            "source": "",
            "subnet": "0.0.0.0",
            "subnet_size": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "vultr_firewall_group.frontend"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vultr_firewall_rule",
      "name": "wireguard",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "firewall_group_id": "6f2ddda6-17bc-4472-ad30-54ea63c853ce",
            "id": "2",
            "ip_type": "v4",
            "notes": "Allow WireGuard",
            "port": "51820",
            "protocol": "udp",
            "source": "",
            "subnet": "0.0.0.0",
            "subnet_size": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "vultr_firewall_group.frontend"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vultr_instance",
      "name": "frontend",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "activation_email": false,
            "allowed_bandwidth": 1,
            "app_id": 0,
            "backups": "disabled",
            "backups_schedule": [],
            "date_created": "2025-05-11T09:59:03+00:00",
            "ddos_protection": false,
            "default_password": "3K(q3ka8?Atr56v4",
            "disk": 25,
            "enable_ipv6": true,
            "features": [
              "ipv6"
            ],
            "firewall_group_id": "6f2ddda6-17bc-4472-ad30-54ea63c853ce",
            "gateway_v4": "149.28.168.1",
            "hostname": "metrics-frontend",
            "id": "4a3bd312-b3e7-48a2-bca7-42041b8ebad5",
            "image_id": null,
            "internal_ip": "",
            "iso_id": null,
            "kvm": "https://my.vultr.com/subs/vps/novnc/api.php?data=djJ8NHd2LUlxZU1qV1g5eG5mdERqQ3pqUi1CNDl1ODVfQ1B87cg5oNoyErgnKB2AL80hQx50JwRLQr7_8UseGMDqg6MFzvmuY9m_HYcHfsIvCXmWeIElrK69IO0-DdZwAD_zjp0svtUJ2Yh2zy4uhnKESdkATsHpfb5a7nOSLOHpBgZ54KXRTk8DvlD-iXLG5v9JS3indSdDlTK7Y8Sz022sX7iDVRCYw1im6fHaMut5gbjhyXD6hzmvD8paj5I7Ybmol8gZ",
            "label": "metrics-frontend",
            "main_ip": "149.28.169.127",
            "netmask_v4": "255.255.254.0",
            "os": "Ubuntu 22.04 x64",
            "os_id": 1743,
            "plan": "vc2-1c-1gb",
            "power_status": "running",
            "private_network_ids": [],
            "ram": 1024,
            "region": "syd",
            "reserved_ip_id": null,
            "script_id": null,
            "server_status": "installingbooting",
            "snapshot_id": null,
            "ssh_key_ids": [
              "c6a4ff57-51bf-47aa-84df-9b25c2e23f5f"
            ],
            "status": "active",
            "tags": [
              "frontend",
              "metrics"
            ],
            "timeouts": null,
            "user_data": "#!/bin/bash\napt-get update\napt-get install -y \\\n  apt-transport-https \\\n  ca-certificates \\\n  curl \\\n  gnupg-agent \\\n  software-properties-common \\\n  ufw\n\n# Install Docker\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -\nadd-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\napt-get update\napt-get install -y docker-ce docker-ce-cli containerd.io\nsystemctl enable docker\nsystemctl start docker\n\n# Install WireGuard\napt-get install -y wireguard\n\n# Configure firewall - more restrictive approach\nufw default deny incoming\nufw default allow outgoing\n    \n# Allow SSH only from specified IPs if provided\nif [ -n \"202.90.241.225/32\" ]; then\n  for ip in 202.90.241.225/32; do\n    ufw allow from $ip to any port 22 proto tcp\n  done\nelse\n  # Fallback to allowing SSH from anywhere (not recommended for production)\n  ufw allow 22/tcp\nfi\n    \n# Allow HTTP/HTTPS for web access\nufw allow 80/tcp\nufw allow 443/tcp\n    \n# Allow WireGuard VPN\nufw allow 51820/udp\n    \n# Enable firewall\necho \"y\" | ufw enable\n    \n# Set SSH to prohibit password authentication\nsed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config\nsystemctl restart sshd\n",
            "v6_main_ip": "2401:c080:1800:1c2b:5400:05ff:fe70:918c",
            "v6_network": "2401:c080:1800:1c2b::",
            "v6_network_size": 64,
            "vcpu_count": 1,
            "vpc_ids": []
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "default_password"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "data.vultr_ssh_key.metrics",
            "vultr_firewall_group.frontend"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vultr_reserved_ip",
      "name": "frontend",
      "provider": "provider[\"registry.terraform.io/vultr/vultr\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "eba320e7-91f9-4aca-9c96-75e2d69ddf0a",
            "instance_id": "4a3bd312-b3e7-48a2-bca7-42041b8ebad5",
            "ip_type": "v4",
            "label": "metrics-frontend-ip",
            "region": "syd",
            "subnet": "149.28.160.158",
            "subnet_size": 32
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.vultr_ssh_key.metrics",
            "vultr_firewall_group.frontend",
            "vultr_instance.frontend"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
